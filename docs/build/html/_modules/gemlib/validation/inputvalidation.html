

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>gemlib.validation.inputvalidation &mdash; gemlib 1.2.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> gemlib
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../user_dataloader.html">Using Dataloader</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../user_deeplearning.html">Deep Learning Classification</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../gemlib.html">gemlib package</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">gemlib</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>gemlib.validation.inputvalidation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for gemlib.validation.inputvalidation</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">gemlib.dataloaderlayer.filedataloaders</span> <span class="kn">import</span> <span class="n">data_loader</span>
<span class="kn">from</span> <span class="nn">gemlib.filtering.simple_filter</span> <span class="kn">import</span> <span class="n">DataColumnFilter</span><span class="p">,</span> <span class="n">QueryFilter</span>
<span class="kn">from</span> <span class="nn">gemlib.classification.linearclassifiers</span> <span class="kn">import</span> <span class="n">StochasticGradientDecent</span><span class="p">,</span> <span class="n">LinearSvmClassifier</span><span class="p">,</span> \
    <span class="n">LinearLogisticRegressionClassifier</span><span class="p">,</span> <span class="n">LinearRidgeClassifier</span><span class="p">,</span> <span class="n">LinearLogisticRegressionCVClassifier</span>
<span class="kn">from</span> <span class="nn">gemlib.classification.deeplearning</span> <span class="kn">import</span> <span class="n">DeepLearning</span>
<span class="kn">from</span> <span class="nn">gemlib.classification.decisiontree</span> <span class="kn">import</span> <span class="n">Decisiontree</span>
<span class="kn">from</span> <span class="nn">gemlib.classification.svm</span> <span class="kn">import</span> <span class="n">SvmSvcClassifier</span>
<span class="kn">from</span> <span class="nn">gemlib.classification.knn</span> <span class="kn">import</span> <span class="n">KnnClassifier</span>
<span class="kn">from</span> <span class="nn">gemlib.clustering.clusterers</span> <span class="kn">import</span> <span class="n">HierClustering</span><span class="p">,</span> <span class="n">AffinityPropagationClustering</span>
<span class="kn">from</span> <span class="nn">gemlib.abstarct.basetask</span> <span class="kn">import</span> <span class="n">task</span><span class="p">,</span> <span class="n">preprocessing</span>
<span class="kn">from</span> <span class="nn">gemlib.regression.regressors</span> <span class="kn">import</span> <span class="n">FRegressorAlgorithm</span><span class="p">,</span> <span class="n">RForest</span>
<span class="kn">from</span> <span class="nn">gemlib.visualization.barplots</span> <span class="kn">import</span> <span class="n">BarPlotting</span>
<span class="kn">from</span> <span class="nn">gemlib.visualization.heatmaps</span> <span class="kn">import</span> <span class="n">CustomHeatMaps</span>
<span class="kn">from</span> <span class="nn">gemlib.visualization.hexbins</span> <span class="kn">import</span> <span class="n">HexbinPlot</span>
<span class="kn">from</span> <span class="nn">gemlib.visualization.scatterplotmatrix</span> <span class="kn">import</span> <span class="n">ScatterPlotMatrix</span>
<span class="kn">from</span> <span class="nn">gemlib.visualization.boxplots</span> <span class="kn">import</span> <span class="n">BoxPlotting</span>
<span class="kn">from</span> <span class="nn">gemlib.visualization.facetgridplot</span> <span class="kn">import</span> <span class="n">Drilldownplot</span>
<span class="kn">from</span> <span class="nn">gemlib.visualization.scatterplots</span> <span class="kn">import</span> <span class="n">ScatterPlot</span>
<span class="kn">from</span> <span class="nn">gemlib.visualization.lineplots</span> <span class="kn">import</span> <span class="n">LinePlot</span>
<span class="kn">from</span> <span class="nn">gemlib.visualization.histogram</span> <span class="kn">import</span> <span class="n">HistPlot</span>
<span class="kn">from</span> <span class="nn">gemlib.featureengineering.featureengineer</span> <span class="kn">import</span> <span class="n">feature_engineer_regex</span><span class="p">,</span> <span class="n">feature_aggregation</span><span class="p">,</span> \
    <span class="n">feature_value_mapping</span><span class="p">,</span> <span class="n">feature_engineer_conditional</span><span class="p">,</span> \
    <span class="n">feature_concat</span><span class="p">,</span> <span class="n">feature_value_list_to_string</span><span class="p">,</span> <span class="n">feature_abse</span><span class="p">,</span> <span class="n">feature_absolute</span><span class="p">,</span> \
    <span class="n">feature_mean</span><span class="p">,</span> <span class="n">feature_se</span><span class="p">,</span> <span class="n">feature_sqrt</span><span class="p">,</span> <span class="n">feature_square</span><span class="p">,</span> <span class="n">feature_std</span><span class="p">,</span> <span class="n">feature_subtract</span><span class="p">,</span> <span class="n">feature_sum</span><span class="p">,</span> \
    <span class="n">text_tokenization</span><span class="p">,</span> <span class="n">one_hot_encoding</span><span class="p">,</span> <span class="n">aggregation</span><span class="p">,</span> <span class="n">text_cleaning</span><span class="p">,</span> <span class="n">train_test_splitting</span><span class="p">,</span> <span class="n">text_encoding</span><span class="p">,</span> \
    <span class="n">factorization</span><span class="p">,</span> <span class="n">embedding</span>
<span class="kn">from</span> <span class="nn">gemlib.classification.confusionmatrix</span> <span class="kn">import</span> <span class="n">confusion_matrix</span><span class="p">,</span> <span class="n">accuracy</span><span class="p">,</span> <span class="n">TP</span><span class="p">,</span> <span class="n">event</span><span class="p">,</span> <span class="n">TP_FP</span><span class="p">,</span> <span class="n">FP</span>
<span class="kn">from</span> <span class="nn">gemlib.classification.roccurve</span> <span class="kn">import</span> <span class="n">RocCurves</span>
<span class="c1">#from gemlib.dataloaderlayer.nosqldataloaders import redis_data_writer, redis_data_loader</span>
<span class="kn">from</span> <span class="nn">gemlib.dataloaderlayer.odbcdataloaders</span> <span class="kn">import</span> <span class="n">sql_data_loader</span>
<span class="kn">from</span> <span class="nn">gemlib.validation</span> <span class="kn">import</span>  <span class="n">utilities</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">gemlib.validation.textpreprocessingvalidation</span> <span class="kn">import</span> <span class="n">TextPreprocessingValidation</span>
<span class="kn">from</span> <span class="nn">gemlib.classification.topicmodelling.lda</span> <span class="kn">import</span> <span class="n">LDATopicModelling</span>
<span class="kn">from</span> <span class="nn">gemlib.classification.topicmodelling.corpusgenerator</span> <span class="kn">import</span> <span class="n">Corpus</span>
<span class="kn">from</span> <span class="nn">gemlib.classification.topicmodelling.lsi</span> <span class="kn">import</span> <span class="n">LSITopicModelling</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>
<span class="kn">from</span> <span class="nn">gemlib.dataloaderlayer.dataprocessing</span> <span class="kn">import</span> <span class="n">data_concat</span><span class="p">,</span> <span class="n">data_joiner</span>
<span class="kn">from</span> <span class="nn">gemlib.validation.keywords</span> <span class="kn">import</span> <span class="o">*</span>


<div class="viewcode-block" id="CwdValidation"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.CwdValidation">[docs]</a><span class="k">class</span> <span class="nc">CwdValidation</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">artifact_folder</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span> <span class="o">=</span> <span class="nb">object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">artifact_folder</span> <span class="o">=</span> <span class="n">artifact_folder</span>

<div class="viewcode-block" id="CwdValidation.is_valid_dict"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.CwdValidation.is_valid_dict">[docs]</a>    <span class="k">def</span> <span class="nf">is_valid_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AssertionError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AssertionError</span><span class="p">(</span>
                <span class="s1">&#39;type error: should be dictionary but it is </span><span class="si">{0}</span><span class="s1">, </span><span class="si">{1}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">),</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="CwdValidation.get_valid_cwd"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.CwdValidation.get_valid_cwd">[docs]</a>    <span class="k">def</span> <span class="nf">get_valid_cwd</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_valid_dict</span><span class="p">():</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;CWD config is not a valid dictionary... try again!!&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">CWD</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;working directory is not set correctly... try again!!!&#39;</span><span class="p">)</span>
        <span class="nb">dir</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">artifact_folder</span><span class="p">)</span> <span class="o">/</span> <span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">CWD</span><span class="p">])</span> <span class="k">if</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">artifact_folder</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> \
            <span class="n">Path</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">CWD</span><span class="p">])</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">dir</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="nb">dir</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">parents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;[</span><span class="si">{}</span><span class="s1">] directory created!!!&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">dir</span><span class="p">))</span>

        <span class="k">return</span> <span class="nb">dir</span></div></div>


<div class="viewcode-block" id="DbValidation"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.DbValidation">[docs]</a><span class="k">class</span> <span class="nc">DbValidation</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span> <span class="o">=</span> <span class="nb">object</span>

<div class="viewcode-block" id="DbValidation.initial_db"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.DbValidation.initial_db">[docs]</a>    <span class="k">def</span> <span class="nf">initial_db</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">port</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">PATH</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;db ip is not defined. ignored... &#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">PORT</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;db port is not defined. ignored... &#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">utilities</span><span class="o">.</span><span class="n">type_is_int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">PORT</span><span class="p">]):</span>
            <span class="n">port</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">PORT</span><span class="p">])</span>

        <span class="k">return</span> <span class="kc">True</span></div>

<div class="viewcode-block" id="DbValidation.get_valid_db"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.DbValidation.get_valid_db">[docs]</a>    <span class="k">def</span> <span class="nf">get_valid_db</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">PATH</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;critical error: db path is missing in the configuration. ignored...&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">DBTYPE</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;Type of db is not defined. ignored...&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">db</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_db</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">db</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;not a valid db!!! ignored:</span><span class="si">{}</span><span class="s2">...&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">DBTYPE</span><span class="p">]))</span>
            <span class="k">return</span> <span class="n">db</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">exceptionType</span><span class="p">,</span> <span class="n">exceptionValue</span><span class="p">,</span> <span class="n">exceptionTraceback</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;dataloader initialization failed!!!</span><span class="se">\n</span><span class="s2"> </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">exceptionValue</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="DataloaderValidation"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.DataloaderValidation">[docs]</a><span class="k">class</span> <span class="nc">DataloaderValidation</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span> <span class="o">=</span> <span class="nb">object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

<div class="viewcode-block" id="DataloaderValidation.initial_data_loader"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.DataloaderValidation.initial_data_loader">[docs]</a>    <span class="k">def</span> <span class="nf">initial_data_loader</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">replace</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">dtypes</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">holdon</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">head</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">definition</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">addtofilename</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">preprocessing</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">port</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">concat</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">truthpath</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">joinon</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">missed</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">metafile</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">how</span> <span class="o">=</span> <span class="s1">&#39;left&#39;</span>
        <span class="n">query</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">connection_str</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="nb">type</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">stage</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">fillna</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">drop_na</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">cache</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">num_rows</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">sheet_name</span> <span class="o">=</span> <span class="s1">&#39;Sheet1&#39;</span>

        <span class="k">if</span> <span class="n">SHEET_NAME</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">sheet_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">SHEET_NAME</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">NUM_ROWS</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">num_rows</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">NUM_ROWS</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">CACHE</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">cache</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">CACHE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span> <span class="k">else</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">DROPNA</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">DROPNA</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;&quot;drop_na&quot; should be a dictionary of column:value. ignored!!!&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">drop_na</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">DROPNA</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">FILLNA</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">FILLNA</span><span class="p">],</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;&quot;fill_na&quot; should be a dictionary of column:value. ignored!!!&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fillna</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">FILLNA</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">utilities</span><span class="o">.</span><span class="n">type_is_int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">FILLNA</span><span class="p">][</span><span class="n">k</span><span class="p">]):</span>
                        <span class="n">fillna</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">FILLNA</span><span class="p">][</span><span class="n">k</span><span class="p">])</span>
                    <span class="k">elif</span> <span class="n">utilities</span><span class="o">.</span><span class="n">type_is_float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">FILLNA</span><span class="p">][</span><span class="n">k</span><span class="p">]):</span>
                        <span class="n">fillna</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">FILLNA</span><span class="p">][</span><span class="n">k</span><span class="p">])</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">fillna</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">FILLNA</span><span class="p">][</span><span class="n">k</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">REPLACE</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">replace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">REPLACE</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">QUERY</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">query</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">QUERY</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="n">CONNECTION_STR</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">connection_str</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">CONNECTION_STR</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">TYPE</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="nb">type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">DTYPES</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">DTYPES</span><span class="p">],</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;&quot;dtype&quot; should be a dictionary of column:type. ignored!!!&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">dtypes</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">DTYPES</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">DTYPES</span><span class="p">][</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;int&#39;</span><span class="p">:</span>
                        <span class="n">dtypes</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">DTYPES</span><span class="p">][</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;float&#39;</span><span class="p">:</span>
                        <span class="n">dtypes</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span>
                    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">DTYPES</span><span class="p">][</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;bool&#39;</span><span class="p">:</span>
                        <span class="n">dtypes</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="nb">bool</span>
        <span class="k">if</span> <span class="n">NUMFRAMESHOLD</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">utilities</span><span class="o">.</span><span class="n">type_is_int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">NUMFRAMESHOLD</span><span class="p">]):</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;&quot;numframes_hold&quot; should be of type of integer. ignored!!!&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">HEAD</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
                    <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;&quot;head&quot; should be defined along with &quot;numframes_hold&quot;, ignored!!!&#39;</span><span class="p">)</span>
                <span class="k">elif</span> <span class="ow">not</span> <span class="n">utilities</span><span class="o">.</span><span class="n">type_is_bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">HEAD</span><span class="p">]):</span>
                    <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;&quot;head&quot; should be of type bool, ignored!!!&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">holdon</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">NUMFRAMESHOLD</span><span class="p">])</span>
                    <span class="n">head</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">HEAD</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span> <span class="k">else</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">NUMFRAMEEXCLUDE</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">exclude</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">NUMFRAMEEXCLUDE</span><span class="p">])</span>
            <span class="n">head</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">HEAD</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span> <span class="k">else</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">SAVE</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">utilities</span><span class="o">.</span><span class="n">type_is_bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">SAVE</span><span class="p">]):</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;&quot;stage&quot; should be of type bool, ignored!!!&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">stage</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">SAVE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span> <span class="k">else</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">CONCAT</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">utilities</span><span class="o">.</span><span class="n">type_is_bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">CONCAT</span><span class="p">]):</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;&quot;concat&quot; should be of type bool, ignored!!!&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">concat</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">CONCAT</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span> <span class="k">else</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">DEFINITION</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">DEFINITION</span><span class="p">],</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;&quot;definition&quot; should be a dictionary of column:value. ignored!!!&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">definition</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">DEFINITION</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">ADDTOFILENAME</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">addtofilename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">ADDTOFILENAME</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">PREPROCESSING</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">preprocessing_validate</span> <span class="o">=</span> <span class="n">PreprocessingValidation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="n">preprocessing</span> <span class="o">=</span> <span class="n">preprocessing_validate</span><span class="o">.</span><span class="n">get_valid_list_of_preprocessing</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">KEYS</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">KEYS</span><span class="p">],</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">or</span>
                    <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">KEYS</span><span class="p">],</span> <span class="nb">list</span><span class="p">)):</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;&quot;Keys&quot; should be of type dictionary or list. ignored!!!&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">keys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">KEYS</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">PORT</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span> <span class="ow">and</span> <span class="n">utilities</span><span class="o">.</span><span class="n">type_is_int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">PORT</span><span class="p">]):</span>
            <span class="n">port</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">PORT</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">METADATAPATH</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">METADATAPATH</span><span class="p">]):</span>
                <span class="k">raise</span> <span class="ne">FileNotFoundError</span>
            <span class="n">metafile</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">METADATAPATH</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">TRUTH</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">PATH</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TRUTH</span><span class="p">]:</span>
                <span class="n">truthpath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TRUTH</span><span class="p">][</span><span class="n">PATH</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;truth path for data is not defined... ignoring truth.&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">JOINON</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TRUTH</span><span class="p">]:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TRUTH</span><span class="p">][</span><span class="n">JOINON</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                    <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;joinon&quot; option should be a list. &#39;</span>
                          <span class="sa">f</span><span class="s1">&#39;But It is </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TRUTH</span><span class="p">][</span><span class="n">JOINON</span><span class="p">])</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">joinon</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TRUTH</span><span class="p">][</span><span class="n">JOINON</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">IFMISSED</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TRUTH</span><span class="p">]:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TRUTH</span><span class="p">][</span><span class="n">IFMISSED</span><span class="p">],</span> <span class="nb">dict</span><span class="p">):</span>
                    <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;&quot;ifnotavailable&quot; should be a dictionary of column:value. ignored!!!&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">missed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TRUTH</span><span class="p">][</span><span class="n">IFMISSED</span><span class="p">]</span>
            <span class="k">if</span> <span class="s1">&#39;how&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TRUTH</span><span class="p">]:</span>
                <span class="n">how</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TRUTH</span><span class="p">][</span><span class="s1">&#39;how&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;csv&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">PATH</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;data loader path is not defined. terminating... &#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">PATH</span><span class="p">])</span> <span class="ow">and</span> \
                    <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">PATH</span><span class="p">]):</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;data loader path is not a path to a file/directory!!!. terminating...&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;sql&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">sql_data_loader</span><span class="p">(</span><span class="n">connection_string</span><span class="o">=</span><span class="n">connection_str</span><span class="p">,</span> <span class="n">definition</span><span class="o">=</span><span class="n">definition</span><span class="p">,</span>
                               <span class="n">replace</span><span class="o">=</span><span class="n">replace</span><span class="p">,</span> <span class="n">dtypes</span><span class="o">=</span><span class="n">dtypes</span><span class="p">,</span> <span class="n">hold_on</span><span class="o">=</span><span class="n">holdon</span><span class="p">,</span>
                               <span class="n">head</span><span class="o">=</span><span class="n">head</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">,</span> <span class="n">addtofilename</span><span class="o">=</span><span class="n">addtofilename</span><span class="p">,</span>
                               <span class="n">validpreprocessing</span><span class="o">=</span><span class="n">preprocessing</span><span class="p">,</span> <span class="n">concat</span><span class="o">=</span><span class="n">concat</span><span class="p">,</span>
                               <span class="n">truthpath</span><span class="o">=</span><span class="n">truthpath</span><span class="p">,</span> <span class="n">joinon</span><span class="o">=</span><span class="n">joinon</span><span class="p">,</span> <span class="n">missed</span><span class="o">=</span><span class="n">missed</span><span class="p">,</span>
                               <span class="n">metafile</span><span class="o">=</span><span class="n">metafile</span><span class="p">,</span> <span class="n">suffix</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                               <span class="n">how</span><span class="o">=</span><span class="n">how</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="n">stage</span><span class="o">=</span><span class="n">stage</span><span class="p">,</span> <span class="n">fillna</span><span class="o">=</span><span class="n">fillna</span><span class="p">,</span> <span class="n">drop_na</span><span class="o">=</span><span class="n">drop_na</span><span class="p">,</span>
                               <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;concat&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">data_concat</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">definition</span><span class="o">=</span><span class="n">definition</span><span class="p">,</span>
                               <span class="n">dtypes</span><span class="o">=</span><span class="n">dtypes</span><span class="p">,</span> <span class="n">hold_on</span><span class="o">=</span><span class="n">holdon</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="n">head</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">,</span>
                               <span class="n">validpreprocessing</span><span class="o">=</span><span class="n">preprocessing</span><span class="p">,</span> <span class="n">concat</span><span class="o">=</span><span class="n">concat</span><span class="p">,</span> <span class="n">joinon</span><span class="o">=</span><span class="n">joinon</span><span class="p">,</span>
                               <span class="n">suffix</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                               <span class="n">how</span><span class="o">=</span><span class="n">how</span><span class="p">,</span> <span class="n">fillna</span><span class="o">=</span><span class="n">fillna</span><span class="p">,</span> <span class="n">drop_na</span><span class="o">=</span><span class="n">drop_na</span><span class="p">,</span> <span class="n">cache</span><span class="o">=</span><span class="n">cache</span><span class="p">,</span>
                               <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">num_rows</span><span class="o">=</span><span class="n">num_rows</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="n">sheet_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;join&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">data_joiner</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">definition</span><span class="o">=</span><span class="n">definition</span><span class="p">,</span>
                               <span class="n">dtypes</span><span class="o">=</span><span class="n">dtypes</span><span class="p">,</span> <span class="n">hold_on</span><span class="o">=</span><span class="n">holdon</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="n">head</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">,</span>
                               <span class="n">validpreprocessing</span><span class="o">=</span><span class="n">preprocessing</span><span class="p">,</span> <span class="n">concat</span><span class="o">=</span><span class="n">concat</span><span class="p">,</span> <span class="n">joinon</span><span class="o">=</span><span class="n">joinon</span><span class="p">,</span>
                               <span class="n">suffix</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                               <span class="n">how</span><span class="o">=</span><span class="n">how</span><span class="p">,</span> <span class="n">fillna</span><span class="o">=</span><span class="n">fillna</span><span class="p">,</span> <span class="n">drop_na</span><span class="o">=</span><span class="n">drop_na</span><span class="p">,</span> <span class="n">cache</span><span class="o">=</span><span class="n">cache</span><span class="p">,</span>
                               <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">num_rows</span><span class="o">=</span><span class="n">num_rows</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="n">sheet_name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">data_loader</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">PATH</span><span class="p">],</span> <span class="n">definition</span><span class="o">=</span><span class="n">definition</span><span class="p">,</span>
                               <span class="n">dtypes</span><span class="o">=</span><span class="n">dtypes</span><span class="p">,</span> <span class="n">hold_on</span><span class="o">=</span><span class="n">holdon</span><span class="p">,</span> <span class="n">head</span><span class="o">=</span><span class="n">head</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">,</span>
                               <span class="n">validpreprocessing</span><span class="o">=</span><span class="n">preprocessing</span><span class="p">,</span> <span class="n">concat</span><span class="o">=</span><span class="n">concat</span><span class="p">,</span> <span class="n">joinon</span><span class="o">=</span><span class="n">joinon</span><span class="p">,</span>
                               <span class="n">suffix</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                               <span class="n">how</span><span class="o">=</span><span class="n">how</span><span class="p">,</span> <span class="n">fillna</span><span class="o">=</span><span class="n">fillna</span><span class="p">,</span> <span class="n">drop_na</span><span class="o">=</span><span class="n">drop_na</span><span class="p">,</span> <span class="n">cache</span><span class="o">=</span><span class="n">cache</span><span class="p">,</span>
                               <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">num_rows</span><span class="o">=</span><span class="n">num_rows</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="n">sheet_name</span><span class="p">)</span></div>

<div class="viewcode-block" id="DataloaderValidation.get_valid_dataloader"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.DataloaderValidation.get_valid_dataloader">[docs]</a>    <span class="k">def</span> <span class="nf">get_valid_dataloader</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1">#if not PATH in self.validate_instance:</span>
        <span class="c1">#    utilities._info(&#39;critical error: dataloader path is missing in the configuration. terminating...&#39;)</span>
        <span class="c1">#    return None</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">TYPE</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;Type of data loader is not defined. terminating...&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">data_loader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_data_loader</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">data_loader</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;not a valid dataloader!!! ignored path:</span><span class="si">{}</span><span class="s2">...&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">PATH</span><span class="p">]))</span>
            <span class="k">return</span> <span class="n">data_loader</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">exceptionType</span><span class="p">,</span> <span class="n">exceptionValue</span><span class="p">,</span> <span class="n">exceptionTraceback</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;dataloader initialization failed!!!</span><span class="se">\n</span><span class="s2"> </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">exceptionValue</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="ListOfDataloaderValidation"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.ListOfDataloaderValidation">[docs]</a><span class="k">class</span> <span class="nc">ListOfDataloaderValidation</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span> <span class="o">=</span> <span class="nb">object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dataloaderlist</span> <span class="o">=</span> <span class="p">[]</span>

<div class="viewcode-block" id="ListOfDataloaderValidation.initial_dataloaders"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.ListOfDataloaderValidation.initial_dataloaders">[docs]</a>    <span class="k">def</span> <span class="nf">initial_dataloaders</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">data_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">DATA_LOADER</span><span class="p">]:</span>
            <span class="n">data_loader</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">DATA_LOADER</span><span class="p">][</span><span class="n">data_name</span><span class="p">]</span>
            <span class="n">valid_dataloader</span> <span class="o">=</span> <span class="n">DataloaderValidation</span><span class="p">(</span><span class="n">data_loader</span><span class="p">,</span> <span class="n">data_name</span><span class="p">)</span>
            <span class="n">valid_dataloader</span> <span class="o">=</span> <span class="n">valid_dataloader</span><span class="o">.</span><span class="n">get_valid_dataloader</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">valid_dataloader</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dataloaderlist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">valid_dataloader</span><span class="p">)</span></div>

<div class="viewcode-block" id="ListOfDataloaderValidation.get_valid_list_of_dataloader"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.ListOfDataloaderValidation.get_valid_list_of_dataloader">[docs]</a>    <span class="k">def</span> <span class="nf">get_valid_list_of_dataloader</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">DATA_LOADER</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">DATA_LOADER</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;there is not any valid dataloader defined on input data.&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">initial_dataloaders</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">exceptionType</span><span class="p">,</span> <span class="n">exceptionValue</span><span class="p">,</span> <span class="n">exceptionTraceback</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;dataloaders initialization failed!!!</span><span class="se">\n</span><span class="s2"> </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">exceptionValue</span><span class="p">))</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dataloaderlist</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;not valid dataloaders!!! dataloaders are ignored ...&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dataloaderlist</span></div></div>


<div class="viewcode-block" id="FeatureEngineeringValidation"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.FeatureEngineeringValidation">[docs]</a><span class="k">class</span> <span class="nc">FeatureEngineeringValidation</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span> <span class="o">=</span> <span class="nb">object</span>

<div class="viewcode-block" id="FeatureEngineeringValidation.initial_feature_engineering"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.FeatureEngineeringValidation.initial_feature_engineering">[docs]</a>    <span class="k">def</span> <span class="nf">initial_feature_engineering</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">save</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">definition</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">durationthr</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">initialbuffer</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">keepcolumnsvals</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">axis</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">truth_col</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="nb">input</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">groupby</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">column</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">concat</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">x_cols</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">y_col</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">test_ratio</span> <span class="o">=</span> <span class="mf">0.2</span>
        <span class="n">tokenizer</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">sequence_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">chunk_size</span><span class="o">=</span> <span class="kc">None</span>
        <span class="n">device</span> <span class="o">=</span> <span class="s1">&#39;cuda&#39;</span>

        <span class="k">if</span> <span class="n">DEVICE</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">device</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">DEVICE</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">TOKENIZER</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">tokenizer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TOKENIZER</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">CHUNK_SIZE</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">chunk_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">CHUNK_SIZE</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">SEQUENCE_LEN</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">sequence_length</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">SEQUENCE_LEN</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">COLUMN</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">column</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">COLUMN</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">TEST_RATIO</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">test_ratio</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TEST_RATIO</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">X_COLS</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">X_COLS</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">X_COLS</span><span class="si">}</span><span class="s1">&quot; should be of type list. try again!&#39;</span><span class="p">)</span>
            <span class="n">x_cols</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">X_COLS</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">Y_COL</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">Y_COL</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">Y_COL</span><span class="si">}</span><span class="s1">&quot; should be of type str. try again!&#39;</span><span class="p">)</span>
            <span class="n">y_col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">Y_COL</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">CONCAT</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">utilities</span><span class="o">.</span><span class="n">type_is_bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">CONCAT</span><span class="p">]):</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;&quot;concat&quot; should be of type bool, ignored!!!&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">concat</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">CONCAT</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span> <span class="k">else</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">COLUMNS</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">COLUMNS</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">COLUMNS</span><span class="si">}</span><span class="s1">&quot; should be of type list. try again!&#39;</span><span class="p">)</span>
            <span class="n">columns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">COLUMNS</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">GROUPBY</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">GROUPBY</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">GROUPBY</span><span class="si">}</span><span class="s1">&quot; should be of type list. try again!&#39;</span><span class="p">)</span>
            <span class="n">groupby</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">GROUPBY</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">INPUT_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="nb">input</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">INPUT_</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">SAVE</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">SAVE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span><span class="p">:</span>
                <span class="n">save</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">DEFINITION</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">DEFINITION</span><span class="p">],</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="n">definition</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">DEFINITION</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;feature engineering definition should be a dictionary!!!, ignored.&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">KEEPCOLUMNVALUES</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">KEEPCOLUMNVALUES</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">keepcolumnsvals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">KEEPCOLUMNVALUES</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;warning: </span><span class="si">{</span><span class="n">KEEPCOLUMNVALUES</span><span class="si">}</span><span class="s1"> should be of type list. ignored!!!&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">AXIS</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">axis</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">AXIS</span><span class="p">])</span>

        <span class="c1"># TODO: move all string types to keywords.py </span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;regex&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">feature_engineer_regex</span><span class="p">(</span><span class="n">definition</span><span class="o">=</span><span class="n">definition</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="n">save</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;mapping&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">feature_value_mapping</span><span class="p">(</span><span class="n">definition</span><span class="o">=</span><span class="n">definition</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="n">save</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;aggregation&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">GROUPBY</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;&quot;groupby&quot; is missing in aggregation definition!!! ignored.&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">GROUPBY</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                    <span class="n">columns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">GROUPBY</span><span class="p">]</span>
                    <span class="k">return</span> <span class="n">aggregation</span><span class="p">(</span><span class="n">definition</span><span class="o">=</span><span class="n">definition</span><span class="p">,</span>
                                               <span class="n">groupby</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;&quot;groupby&quot; should be a list of columns!!! ignored.&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;conditional&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">feature_engineer_conditional</span><span class="p">(</span><span class="n">definition</span><span class="o">=</span><span class="n">definition</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="n">save</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;concatenate&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">feature_concat</span><span class="p">(</span><span class="n">definition</span><span class="o">=</span><span class="n">definition</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="n">save</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;list_to_string&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">feature_value_list_to_string</span><span class="p">(</span><span class="n">definition</span><span class="o">=</span><span class="n">definition</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="n">save</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;event_extraction&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">TIMECOLUMN</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;error: </span><span class="si">{</span><span class="n">TIMECOLUMN</span><span class="si">}</span><span class="s1"> is not defined in the process. feature engineering ignored!!!&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">TRUTH</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
                <span class="n">truth_col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TRUTH</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">PREDICTED</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;error: </span><span class="si">{</span><span class="n">PREDICTED</span><span class="si">}</span><span class="s1"> is not defined in the process. feature engineering ignored!!!&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">TARGETEVENTVALUE</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;error: </span><span class="si">{</span><span class="n">TARGETEVENTVALUE</span><span class="si">}</span><span class="s1"> is not defined in the process. feature engineering ignored!!!&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">INITIALBUFFER</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">utilities</span><span class="o">.</span><span class="n">type_is_int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">INITIALBUFFER</span><span class="p">]):</span>
                  <span class="n">initialbuffer</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">INITIALBUFFER</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;warning: </span><span class="si">{</span><span class="n">INITIALBUFFER</span><span class="si">}</span><span class="s1"> should be of type int. ignored!!!&#39;</span><span class="p">)</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">SE</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">feature_se</span><span class="p">(</span><span class="n">definition</span><span class="o">=</span><span class="n">definition</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="n">save</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">ABSE</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">feature_abse</span><span class="p">(</span><span class="n">definition</span><span class="o">=</span><span class="n">definition</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="n">save</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">SUBTRACT</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">feature_subtract</span><span class="p">(</span><span class="n">definition</span><span class="o">=</span><span class="n">definition</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="n">save</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">MEAN</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">feature_mean</span><span class="p">(</span><span class="n">definition</span><span class="o">=</span><span class="n">definition</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="n">save</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">SQUARE</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">feature_square</span><span class="p">(</span><span class="n">definition</span><span class="o">=</span><span class="n">definition</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="n">save</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">ABSOLUTE</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">feature_absolute</span><span class="p">(</span><span class="n">definition</span><span class="o">=</span><span class="n">definition</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="n">save</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">SUM</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">feature_sum</span><span class="p">(</span><span class="n">definition</span><span class="o">=</span><span class="n">definition</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="n">save</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">SQRT</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">feature_sqrt</span><span class="p">(</span><span class="n">definition</span><span class="o">=</span><span class="n">definition</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="n">save</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">STD</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">feature_std</span><span class="p">(</span><span class="n">definition</span><span class="o">=</span><span class="n">definition</span><span class="p">,</span> <span class="n">save</span><span class="o">=</span><span class="n">save</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">EMBEDDING</span><span class="p">:</span>
            <span class="n">all_req_props</span> <span class="o">=</span> <span class="p">[</span><span class="n">EMBEDDING_DIM</span><span class="p">,</span> <span class="n">EMBEDDING_PATH</span><span class="p">,</span> <span class="n">NUM_VOCABS</span><span class="p">,</span> <span class="n">TOKENIZER</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">all_req_props</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">prop</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
                    <span class="n">utilities</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">prop</span><span class="si">}</span><span class="s1">&quot; is missing in embedding. &#39;</span>
                    <span class="s1">&#39;please define it and try again!&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">EMBEDDING_DIM</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">EMBEDDING_DIM</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">NUM_VOCABS</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">NUM_VOCABS</span><span class="p">])</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">EMBEDDING_PATH</span><span class="p">]):</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;embedding_path : </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">EMBEDDING_PATH</span><span class="p">]</span><span class="si">}</span><span class="s1"> &#39;</span>
                <span class="s1">&#39;is not valid. please fix it and try again!&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">embedding</span><span class="p">(</span><span class="n">tokenizer</span><span class="o">=</span><span class="n">tokenizer</span><span class="p">,</span>
                                  <span class="n">embedding_dim</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">EMBEDDING_DIM</span><span class="p">],</span>
                                  <span class="n">embedding_path</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">EMBEDDING_PATH</span><span class="p">],</span>
                                  <span class="n">num_vocab</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">NUM_VOCABS</span><span class="p">],</span>
                                  <span class="nb">input</span><span class="o">=</span><span class="nb">input</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">ONE_HOT</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">one_hot_encoding</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="nb">input</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">TEXT_CLEANING</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">text_cleaning</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="nb">input</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">TRAIN_TEST_SPLIT</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">x_cols</span> <span class="ow">and</span> <span class="n">y_col</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">train_test_splitting</span><span class="p">(</span><span class="n">x_cols</span><span class="o">=</span><span class="n">x_cols</span><span class="p">,</span> <span class="n">y_col</span><span class="o">=</span><span class="n">y_col</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="nb">input</span><span class="p">,</span> <span class="n">test_ratio</span><span class="o">=</span><span class="n">test_ratio</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;both </span><span class="si">{</span><span class="n">X_COLS</span><span class="si">}</span><span class="s1"> and </span><span class="si">{</span><span class="n">Y_COL</span><span class="si">}</span><span class="s1"> should be defined for </span><span class="si">{</span><span class="n">TRAIN_TEST_SPLIT</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">TEXT_TOKENIZATION</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">text_tokenization</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="nb">input</span><span class="p">,</span> <span class="n">concat</span><span class="o">=</span><span class="n">concat</span><span class="p">,</span> <span class="n">tokenizer</span><span class="o">=</span><span class="n">tokenizer</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="n">column</span><span class="p">,</span>
                                     <span class="n">sequence_lenght</span><span class="o">=</span><span class="n">sequence_length</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">TEXT_ENCODING</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">text_encoding</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="nb">input</span><span class="p">,</span> <span class="n">concat</span><span class="o">=</span><span class="n">concat</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="n">column</span><span class="p">,</span> <span class="n">chunk_size</span><span class="o">=</span><span class="n">chunk_size</span><span class="p">,</span> <span class="n">device</span><span class="o">=</span><span class="n">device</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">FACTORIZATION</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">factorization</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="nb">input</span><span class="p">,</span> <span class="n">concat</span><span class="o">=</span><span class="n">concat</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="n">column</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;&quot;</span><span class="si">{}</span><span class="s1">&quot; is not a valid feature engineering type!!!, ignored.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]))</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="FeatureEngineeringValidation.get_valid_feature_engineering"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.FeatureEngineeringValidation.get_valid_feature_engineering">[docs]</a>    <span class="k">def</span> <span class="nf">get_valid_feature_engineering</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">TYPE</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;&quot;type&quot; is not defined in feature engineering on process!!!, ignored.&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="c1"># if not DEFINITION in self.validate_instance:</span>
        <span class="c1">#     utilities._info(&#39;&quot;definition&quot; of feature engineering is missing!!!, ignored.&#39;)</span>
        <span class="c1">#     return None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fengineering</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_feature_engineering</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">fengineering</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;not a valid feature engineering set up!!! ignored.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">fengineering</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">exceptionType</span><span class="p">,</span> <span class="n">exceptionValue</span><span class="p">,</span> <span class="n">exceptionTraceback</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;feature engineering initialization failed!!!</span><span class="se">\n</span><span class="s2"> </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">exceptionValue</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="DatafilterValidation"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.DatafilterValidation">[docs]</a><span class="k">class</span> <span class="nc">DatafilterValidation</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span> <span class="o">=</span> <span class="nb">object</span>

<div class="viewcode-block" id="DatafilterValidation.initial_data_filter"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.DatafilterValidation.initial_data_filter">[docs]</a>    <span class="k">def</span> <span class="nf">initial_data_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">save</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="nb">input</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">INPUT_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="nb">input</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">INPUT_</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">SAVE</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">SAVE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span><span class="p">:</span>
                <span class="n">save</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;column&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">COLUMNS</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">COLUMNS</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                    <span class="k">return</span> <span class="n">DataColumnFilter</span><span class="p">(</span><span class="n">list_col_names</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">COLUMNS</span><span class="p">],</span> 
                                            <span class="n">save</span><span class="o">=</span><span class="n">save</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="nb">input</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;query&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">QUERY</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">QUERY</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">COLUMNS</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">QueryFilter</span><span class="p">(</span><span class="n">list_col_names</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">COLUMNS</span><span class="p">],</span>
                                       <span class="n">query</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">QUERY</span><span class="p">],</span> <span class="n">save</span><span class="o">=</span><span class="n">save</span><span class="p">,</span>
                                       <span class="nb">input</span><span class="o">=</span><span class="nb">input</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">QueryFilter</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">QUERY</span><span class="p">],</span> <span class="n">save</span><span class="o">=</span><span class="n">save</span><span class="p">,</span>
                                           <span class="nb">input</span><span class="o">=</span><span class="nb">input</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="DatafilterValidation.get_valid_filter"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.DatafilterValidation.get_valid_filter">[docs]</a>    <span class="k">def</span> <span class="nf">get_valid_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">PROCESS</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;there is not filtering on input data.&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">TYPE</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;&quot;type&quot; is not defined in filter!!!, ignored.&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">filter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_data_filter</span><span class="p">()</span>
            <span class="k">if</span> <span class="nb">filter</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;not a valid filter!!! filtering ignored...&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">filter</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">exceptionType</span><span class="p">,</span> <span class="n">exceptionValue</span><span class="p">,</span> <span class="n">exceptionTraceback</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;data filtering initialization failed!!!</span><span class="se">\n</span><span class="s2"> </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">exceptionValue</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="ClassificationValidation"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.ClassificationValidation">[docs]</a><span class="k">class</span> <span class="nc">ClassificationValidation</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span> <span class="o">=</span> <span class="nb">object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

<div class="viewcode-block" id="ClassificationValidation.initial_classifier"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.ClassificationValidation.initial_classifier">[docs]</a>    <span class="k">def</span> <span class="nf">initial_classifier</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dimensions</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">sequence_length</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="nb">input</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">x_train</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">x_test</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">y_train</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">y_test</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">embedding_matrix</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">epoch</span> <span class="o">=</span> <span class="mi">100</span>
        <span class="n">num_classes</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">model_name</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">preprocessing</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">batch_size</span><span class="o">=</span> <span class="kc">None</span>
        <span class="n">model_path</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">y_col_map</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">top_n</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="n">TOP_N</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">top_n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TOP_N</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">Y_COL_MAP</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">y_col_map</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">Y_COL_MAP</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">MODEL_PATH</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">model_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">MODEL_PATH</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">BATCH_SIZE</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">batch_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">BATCH_SIZE</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">MODEL_NAME</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">model_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">MODEL_NAME</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">MODE</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">mode</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">MODE</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">X_TRAIN</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">x_train</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">X_TRAIN</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">X_TEST</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">x_test</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">X_TEST</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">Y_TRAIN</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">y_train</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">Y_TRAIN</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">Y_TEST</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">y_test</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">Y_TEST</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">INPUT_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="nb">input</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">INPUT_</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">EMBEDDING_MATRIX</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">embedding_matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">EMBEDDING_MATRIX</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">EPOCH</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">epoch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">EPOCH</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">NUM_CLASSES</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">num_classes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">NUM_CLASSES</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">SEQUENCE_LEN</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">sequence_length</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">SEQUENCE_LEN</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">COLUMNS</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">COLUMNS</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> \
                            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">COLUMNS</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">dimensions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">COLUMNS</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;either &quot;columns&quot; in classification is not a list or it has less than 2 element!!!&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">PREPROCESSING</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">preprocessing_validate</span> <span class="o">=</span> <span class="n">PreprocessingValidation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="n">preprocessing</span> <span class="o">=</span> <span class="n">preprocessing_validate</span><span class="o">.</span><span class="n">get_valid_list_of_preprocessing</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">ALGORITHM</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;sgd&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">StochasticGradientDecent</span><span class="p">(</span><span class="n">dimensions</span><span class="o">=</span><span class="n">dimensions</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">ALGORITHM</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;dtree&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Decisiontree</span><span class="p">(</span><span class="n">dimensions</span><span class="o">=</span><span class="n">dimensions</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">ALGORITHM</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;svc&#39;</span><span class="p">:</span>
            <span class="n">kernel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">KERNEL</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">if</span> <span class="n">KERNEL</span> <span class="ow">in</span> \
                                                               <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">else</span> <span class="kc">None</span>
            <span class="k">return</span> <span class="n">SvmSvcClassifier</span><span class="p">(</span><span class="n">dimensions</span><span class="o">=</span><span class="n">dimensions</span><span class="p">,</span> <span class="n">kernel</span><span class="o">=</span><span class="n">kernel</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">ALGORITHM</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;knn&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">KnnClassifier</span><span class="p">(</span><span class="n">dimensions</span><span class="o">=</span><span class="n">dimensions</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">ALGORITHM</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;linsvc&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">LinearSvmClassifier</span><span class="p">(</span><span class="n">dimensions</span><span class="o">=</span><span class="n">dimensions</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">ALGORITHM</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;linlogreg&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">LinearLogisticRegressionClassifier</span><span class="p">(</span><span class="n">dimensions</span><span class="o">=</span><span class="n">dimensions</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">ALGORITHM</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;linlogregcv&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">LinearLogisticRegressionCVClassifier</span><span class="p">(</span><span class="n">dimensions</span><span class="o">=</span><span class="n">dimensions</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">ALGORITHM</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;ridge&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">LinearRidgeClassifier</span><span class="p">(</span><span class="n">dimensions</span><span class="o">=</span><span class="n">dimensions</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">ALGORITHM</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">DEEPLEARNING</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">DeepLearning</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="nb">input</span><span class="p">,</span> <span class="n">x_train</span><span class="o">=</span><span class="n">x_train</span><span class="p">,</span> <span class="n">x_test</span><span class="o">=</span><span class="n">x_test</span><span class="p">,</span>
                                <span class="n">y_train</span><span class="o">=</span><span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span><span class="o">=</span><span class="n">y_test</span><span class="p">,</span> <span class="n">epoch</span><span class="o">=</span><span class="n">epoch</span><span class="p">,</span>
                                <span class="n">num_classes</span><span class="o">=</span><span class="n">num_classes</span><span class="p">,</span> <span class="n">embedding_matrix</span><span class="o">=</span><span class="n">embedding_matrix</span><span class="p">,</span>
                                <span class="n">sequence_lenght</span><span class="o">=</span><span class="n">sequence_length</span><span class="p">,</span> <span class="n">model_name</span><span class="o">=</span><span class="n">model_name</span><span class="p">,</span>
                                <span class="n">mode</span><span class="o">=</span><span class="n">mode</span><span class="p">,</span> <span class="n">validpreprocessing</span><span class="o">=</span><span class="n">preprocessing</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="n">batch_size</span><span class="p">,</span>
                                <span class="n">model_path</span><span class="o">=</span><span class="n">model_path</span><span class="p">,</span> <span class="n">y_col_map</span><span class="o">=</span><span class="n">y_col_map</span><span class="p">,</span> <span class="n">top_n</span><span class="o">=</span><span class="n">top_n</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="ClassificationValidation.get_valid_classifier"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.ClassificationValidation.get_valid_classifier">[docs]</a>    <span class="k">def</span> <span class="nf">get_valid_classifier</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">classifier</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_classifier</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">classifier</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;not a valid classifier!!! classification ignored ...&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">classifier</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">exceptionType</span><span class="p">,</span> <span class="n">exceptionValue</span><span class="p">,</span> <span class="n">exceptionTraceback</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;classifier initialization failed!!!</span><span class="se">\n</span><span class="s2"> </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">exceptionValue</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="ClusteringValidation"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.ClusteringValidation">[docs]</a><span class="k">class</span> <span class="nc">ClusteringValidation</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span> <span class="o">=</span> <span class="nb">object</span>

<div class="viewcode-block" id="ClusteringValidation.initial_clusterer"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.ClusteringValidation.initial_clusterer">[docs]</a>    <span class="k">def</span> <span class="nf">initial_clusterer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dimensions</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">target</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="nb">filter</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">COLUMNS</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">COLUMNS</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> \
                            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">COLUMNS</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">dimensions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">COLUMNS</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;either &quot;columns&quot; in classification is not a list or it has less than 1 element!!!&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">CLASSDEFINITION</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">target</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">CLASSDEFINITION</span><span class="p">]</span>  <span class="c1"># this is for cluster</span>

        <span class="k">if</span> <span class="n">FILTER</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="nb">filter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">FILTER</span><span class="p">]</span>  <span class="c1"># this is for cluster</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">ALGORITHM</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;hca&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">HierClustering</span><span class="p">(</span><span class="n">dimensions</span><span class="o">=</span><span class="n">dimensions</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="n">target</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">,</span>
                                  <span class="n">algo_name</span><span class="o">=</span><span class="s1">&#39;Hierarchical&#39;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">ALGORITHM</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;affpro&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">AffinityPropagationClustering</span><span class="p">(</span><span class="n">dimensions</span><span class="o">=</span><span class="n">dimensions</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="n">target</span><span class="p">,</span> <span class="nb">filter</span><span class="o">=</span><span class="nb">filter</span><span class="p">,</span>
                                                 <span class="n">algo_name</span><span class="o">=</span><span class="s1">&#39;AffinityPropagation&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="ClusteringValidation.get_valid_clusterer"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.ClusteringValidation.get_valid_clusterer">[docs]</a>    <span class="k">def</span> <span class="nf">get_valid_clusterer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">clusterer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_clusterer</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">clusterer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;not a valid clusterer!!! clustering ignored ...&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">clusterer</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">exceptionType</span><span class="p">,</span> <span class="n">exceptionValue</span><span class="p">,</span> <span class="n">exceptionTraceback</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;clusterer initialization failed!!!</span><span class="se">\n</span><span class="s2"> </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">exceptionValue</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="RocCurveValidation"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.RocCurveValidation">[docs]</a><span class="k">class</span> <span class="nc">RocCurveValidation</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span> <span class="o">=</span> <span class="nb">object</span>

<div class="viewcode-block" id="RocCurveValidation.initial_roc_curve"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.RocCurveValidation.initial_roc_curve">[docs]</a>    <span class="k">def</span> <span class="nf">initial_roc_curve</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">groupby</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">preprocessing</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">truth</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">predicted</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">title</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">thresholds</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">multi_plot</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">scatter_point</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">TRUTH</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span> <span class="ow">and</span> <span class="n">PREDICTED</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">truth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TRUTH</span><span class="p">]</span>
            <span class="n">predicted</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">PREDICTED</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">GROUPBY</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">GROUPBY</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">groupby</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">GROUPBY</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;either &quot;columns&quot; in confusion is not a list or empty!!!&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">TITLE</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TITLE</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">PREPROCESSING</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">preprocessing_validate</span> <span class="o">=</span> <span class="n">PreprocessingValidation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">)</span>
            <span class="n">preprocessing</span> <span class="o">=</span> <span class="n">preprocessing_validate</span><span class="o">.</span><span class="n">get_valid_list_of_preprocessing</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">THRESHOLDS</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">THRESHOLDS</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">thresholds</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">THRESHOLDS</span><span class="p">]]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;either &quot;threshold&quot; in ROC curve is not a list or empty!!!&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;figsize&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;figsize&#39;</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">figsize</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">([</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;figsize&#39;</span><span class="p">]])</span>
        <span class="k">if</span> <span class="s1">&#39;fontsize&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">fontsize</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;fontsize&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">MULTIPLOT</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">MULTIPLOT</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span><span class="p">:</span>
                <span class="n">multi_plot</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="s1">&#39;scatter_point&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">scatter_point</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;scatter_point&#39;</span><span class="p">]]</span>
        <span class="k">return</span> <span class="n">RocCurves</span><span class="p">(</span><span class="n">truth</span><span class="o">=</span><span class="n">truth</span><span class="p">,</span> <span class="n">predicted</span><span class="o">=</span><span class="n">predicted</span><span class="p">,</span> <span class="n">groupby</span><span class="o">=</span><span class="n">groupby</span><span class="p">,</span>
                         <span class="n">validpreprocessing</span><span class="o">=</span><span class="n">preprocessing</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">thresholds</span><span class="o">=</span><span class="n">thresholds</span><span class="p">,</span>
                         <span class="n">multi_plot</span><span class="o">=</span><span class="n">multi_plot</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span>
                         <span class="n">scatter_point</span><span class="o">=</span><span class="n">scatter_point</span><span class="p">)</span></div>

<div class="viewcode-block" id="RocCurveValidation.get_valid_roc_curve"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.RocCurveValidation.get_valid_roc_curve">[docs]</a>    <span class="k">def</span> <span class="nf">get_valid_roc_curve</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">roc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_roc_curve</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">roc</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;Not a valid ROC curve!!! roc curve is terminated...&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">roc</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">exceptionType</span><span class="p">,</span> <span class="n">exceptionValue</span><span class="p">,</span> <span class="n">exceptionTraceback</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;Roc Curve initialization failed :((!!!</span><span class="se">\n</span><span class="s2"> </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">exceptionValue</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="ConfusionMatrixValidation"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.ConfusionMatrixValidation">[docs]</a><span class="k">class</span> <span class="nc">ConfusionMatrixValidation</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span> <span class="o">=</span> <span class="nb">object</span>

<div class="viewcode-block" id="ConfusionMatrixValidation.initial_confusion"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.ConfusionMatrixValidation.initial_confusion">[docs]</a>    <span class="k">def</span> <span class="nf">initial_confusion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">columnindex</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">rowindex</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">groupby</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">preprocessing</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">visualization</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">truth</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">predicted</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">title</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">visualization_type</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">column_map</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">keepcolumnvalues</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="s1">&#39;keepcolumnvalues&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">keepcolumnvalues</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;keepcolumnvalues&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="s1">&#39;column_map&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">column_map</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;column_map&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">TRUTH</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span> <span class="ow">and</span> <span class="n">PREDICTED</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">truth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TRUTH</span><span class="p">]</span>
            <span class="n">predicted</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">PREDICTED</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">COLUMNINDEX</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">COLUMNINDEX</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">columnindex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">COLUMNINDEX</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;either &quot;conlumnindex&quot; in confusion is not a list or empty!!!&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ROWINDEX</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">ROWINDEX</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">rowindex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">ROWINDEX</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;either &quot;rowindex&quot; in confusion is not a list or empty!!!&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">GROUPBY</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">GROUPBY</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">groupby</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">GROUPBY</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;either &quot;columns&quot; in confusion is not a list or empty!!!&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">TITLE</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TITLE</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">PREPROCESSING</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">preprocessing_validate</span> <span class="o">=</span> <span class="n">PreprocessingValidation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">)</span>
            <span class="n">preprocessing</span> <span class="o">=</span> <span class="n">preprocessing_validate</span><span class="o">.</span><span class="n">get_valid_list_of_preprocessing</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">VISUALIZATION</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">visualization_valid</span> <span class="o">=</span> <span class="n">PlotValidation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">VISUALIZATION</span><span class="p">])</span>
            <span class="n">visualization</span> <span class="o">=</span> <span class="n">task</span><span class="p">(</span><span class="n">visualization_valid</span><span class="o">.</span><span class="n">get_valid_plotter</span><span class="p">(),</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">VISUALIZATIONTYPE</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">visualization_type</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">VISUALIZATIONTYPE</span><span class="p">]</span>
            <span class="k">assert</span><span class="p">(</span><span class="n">visualization_type</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;heatmap&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">SUBTASK</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">SUBTASK</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;accuracy&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">accuracy</span><span class="p">(</span><span class="n">truth</span><span class="o">=</span><span class="n">truth</span><span class="p">,</span> <span class="n">predicted</span><span class="o">=</span><span class="n">predicted</span><span class="p">,</span> <span class="n">rowindex</span><span class="o">=</span><span class="n">rowindex</span><span class="p">,</span>
                                <span class="n">columnindex</span><span class="o">=</span><span class="n">columnindex</span><span class="p">,</span> <span class="n">groupby</span><span class="o">=</span><span class="n">groupby</span><span class="p">,</span>
                                <span class="n">validpreprocessing</span><span class="o">=</span><span class="n">preprocessing</span><span class="p">,</span> <span class="n">validvisualization</span><span class="o">=</span><span class="n">visualization</span><span class="p">,</span>
                                <span class="nb">type</span><span class="o">=</span><span class="n">visualization_type</span><span class="p">,</span> <span class="n">column_map</span><span class="o">=</span><span class="n">column_map</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">SUBTASK</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;tp&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">TP</span><span class="p">(</span><span class="n">truth</span><span class="o">=</span><span class="n">truth</span><span class="p">,</span> <span class="n">predicted</span><span class="o">=</span><span class="n">predicted</span><span class="p">,</span> <span class="n">rowindex</span><span class="o">=</span><span class="n">rowindex</span><span class="p">,</span>
                                <span class="n">columnindex</span><span class="o">=</span><span class="n">columnindex</span><span class="p">,</span> <span class="n">groupby</span><span class="o">=</span><span class="n">groupby</span><span class="p">,</span>
                                <span class="n">validpreprocessing</span><span class="o">=</span><span class="n">preprocessing</span><span class="p">,</span> <span class="n">validvisualization</span><span class="o">=</span><span class="n">visualization</span><span class="p">,</span>
                                <span class="nb">type</span><span class="o">=</span><span class="n">visualization_type</span><span class="p">,</span> <span class="n">column_map</span><span class="o">=</span><span class="n">column_map</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">SUBTASK</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;fp&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">FP</span><span class="p">(</span><span class="n">truth</span><span class="o">=</span><span class="n">truth</span><span class="p">,</span> <span class="n">predicted</span><span class="o">=</span><span class="n">predicted</span><span class="p">,</span> <span class="n">rowindex</span><span class="o">=</span><span class="n">rowindex</span><span class="p">,</span>
                                <span class="n">columnindex</span><span class="o">=</span><span class="n">columnindex</span><span class="p">,</span> <span class="n">groupby</span><span class="o">=</span><span class="n">groupby</span><span class="p">,</span>
                                <span class="n">validpreprocessing</span><span class="o">=</span><span class="n">preprocessing</span><span class="p">,</span> <span class="n">validvisualization</span><span class="o">=</span><span class="n">visualization</span><span class="p">,</span>
                                <span class="nb">type</span><span class="o">=</span><span class="n">visualization_type</span><span class="p">,</span> <span class="n">column_map</span><span class="o">=</span><span class="n">column_map</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">SUBTASK</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;tp_fp&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">TP_FP</span><span class="p">(</span><span class="n">truth</span><span class="o">=</span><span class="n">truth</span><span class="p">,</span> <span class="n">predicted</span><span class="o">=</span><span class="n">predicted</span><span class="p">,</span> <span class="n">rowindex</span><span class="o">=</span><span class="n">rowindex</span><span class="p">,</span>
                                <span class="n">columnindex</span><span class="o">=</span><span class="n">columnindex</span><span class="p">,</span> <span class="n">groupby</span><span class="o">=</span><span class="n">groupby</span><span class="p">,</span>
                                <span class="n">validpreprocessing</span><span class="o">=</span><span class="n">preprocessing</span><span class="p">,</span> <span class="n">validvisualization</span><span class="o">=</span><span class="n">visualization</span><span class="p">,</span>
                                <span class="nb">type</span><span class="o">=</span><span class="n">visualization_type</span><span class="p">)</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">SUBTASK</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;event&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">TIMECOLUMN</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">event</span><span class="p">(</span><span class="n">timecolumn</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TIMECOLUMN</span><span class="p">],</span> <span class="n">groupby</span><span class="o">=</span><span class="n">groupby</span><span class="p">,</span>
                                 <span class="n">validpreprocessing</span><span class="o">=</span><span class="n">preprocessing</span><span class="p">,</span> <span class="n">validvisualization</span><span class="o">=</span><span class="n">visualization</span><span class="p">,</span>
                                 <span class="n">column_map</span><span class="o">=</span><span class="n">column_map</span><span class="p">,</span> <span class="n">keepcolumnvalues</span><span class="o">=</span><span class="n">keepcolumnvalues</span><span class="p">)</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;error: TIMECOLUMN is missing in event task definition. ignored!!!&quot;</span><span class="p">)</span>
                <span class="k">return</span>

        <span class="k">return</span> <span class="n">confusion_matrix</span><span class="p">(</span><span class="n">truth</span><span class="o">=</span><span class="n">truth</span><span class="p">,</span> <span class="n">predicted</span><span class="o">=</span><span class="n">predicted</span><span class="p">,</span> <span class="n">rowindex</span><span class="o">=</span><span class="n">rowindex</span><span class="p">,</span>
                                <span class="n">columnindex</span><span class="o">=</span><span class="n">columnindex</span><span class="p">,</span> <span class="n">groupby</span><span class="o">=</span><span class="n">groupby</span><span class="p">,</span>
                                <span class="n">validpreprocessing</span><span class="o">=</span><span class="n">preprocessing</span><span class="p">,</span> <span class="n">validvisualization</span><span class="o">=</span><span class="n">visualization</span><span class="p">,</span>
                                <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">)</span></div>

<div class="viewcode-block" id="ConfusionMatrixValidation.get_valid_confusion"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.ConfusionMatrixValidation.get_valid_confusion">[docs]</a>    <span class="k">def</span> <span class="nf">get_valid_confusion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># if TRUTH not in self.validate_instance or \</span>
        <span class="c1">#                 PREDICTED not in self.validate_instance:</span>
        <span class="c1">#     utilities._info(&#39;neither truth nor predicted are defined in confusion. terminating...&#39;)</span>
        <span class="c1">#     return None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">confusion</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_confusion</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">confusion</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;not a valid confusion!!! confusoin ignored ...&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">confusion</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">exceptionType</span><span class="p">,</span> <span class="n">exceptionValue</span><span class="p">,</span> <span class="n">exceptionTraceback</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;confusion matrix initialization failed!!!</span><span class="se">\n</span><span class="s2"> </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">exceptionValue</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="RegressionValidation"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.RegressionValidation">[docs]</a><span class="k">class</span> <span class="nc">RegressionValidation</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span> <span class="o">=</span> <span class="nb">object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>

<div class="viewcode-block" id="RegressionValidation.initial_regressor"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.RegressionValidation.initial_regressor">[docs]</a>    <span class="k">def</span> <span class="nf">initial_regressor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">dimensions</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">target</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">to_numerical</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">features</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">TARGET</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">target</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TARGET</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">TARGET</span><span class="si">}</span><span class="s1">&quot; must be defined in the config file. try again!&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">TO_NUMERICAL</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TO_NUMERICAL</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> \
                            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TO_NUMERICAL</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">to_numerical</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TO_NUMERICAL</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">COLUMNS</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">COLUMNS</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> \
                            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">COLUMNS</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">features</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">COLUMNS</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;either &quot;columns&quot; in regressor is not a list or it has less than 2 element!!!&#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">PREPROCESSING</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">preprocessing_validate</span> <span class="o">=</span> <span class="n">PreprocessingValidation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="n">preprocessing</span> <span class="o">=</span> <span class="n">preprocessing_validate</span><span class="o">.</span><span class="n">get_valid_list_of_preprocessing</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">ALGORITHM</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;random_forest&#39;</span><span class="p">:</span>
            <span class="n">n_estimators</span> <span class="o">=</span> <span class="mi">1000</span> 
            <span class="n">n_jobs</span> <span class="o">=</span> <span class="mi">3</span>
            <span class="n">oob_score</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">max_depth</span> <span class="o">=</span> <span class="mi">10</span>
            <span class="k">if</span> <span class="s1">&#39;n_estimator&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
                <span class="n">n_estimators</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;n_estimator&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="s1">&#39;n_jobs&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
                <span class="n">n_jobs</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;n_jobs&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="s1">&#39;max_depth&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
                <span class="n">max_depth</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;max_depth&#39;</span><span class="p">])</span>

            <span class="k">return</span> <span class="n">RForest</span><span class="p">(</span><span class="n">features</span><span class="o">=</span><span class="n">features</span><span class="p">,</span> <span class="n">algo_name</span><span class="o">=</span><span class="s1">&#39;random_forest&#39;</span><span class="p">,</span>
                           <span class="n">n_estimator</span><span class="o">=</span><span class="n">n_estimators</span><span class="p">,</span>
                           <span class="n">target</span><span class="o">=</span><span class="n">target</span><span class="p">,</span> <span class="n">n_jobs</span><span class="o">=</span><span class="n">n_jobs</span><span class="p">,</span>
                           <span class="n">max_depth</span><span class="o">=</span><span class="n">max_depth</span><span class="p">,</span>
                           <span class="n">validpreprocessing</span><span class="o">=</span><span class="n">preprocessing</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="RegressionValidation.get_valid_regressor"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.RegressionValidation.get_valid_regressor">[docs]</a>    <span class="k">def</span> <span class="nf">get_valid_regressor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">regressor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_regressor</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">regressor</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;not a valid regressor!!! regression ignored ...&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">regressor</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">exceptionType</span><span class="p">,</span> <span class="n">exceptionValue</span><span class="p">,</span> <span class="n">exceptionTraceback</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;regressor initialization failed!!!</span><span class="se">\n</span><span class="s2"> </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">exceptionValue</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="PlotValidation"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.PlotValidation">[docs]</a><span class="k">class</span> <span class="nc">PlotValidation</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span> <span class="o">=</span> <span class="nb">object</span>

<div class="viewcode-block" id="PlotValidation.initial_plot"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.PlotValidation.initial_plot">[docs]</a>    <span class="k">def</span> <span class="nf">initial_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">columns</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">target</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">x</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">y</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">z</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">d1</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">d2</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">d3</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">fun</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">order</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">preprocessing</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;untitled&#39;</span>
        <span class="n">x_label</span> <span class="o">=</span> <span class="s1">&#39;unlabeled&#39;</span>
        <span class="n">y_label</span> <span class="o">=</span> <span class="s1">&#39;unlabeled&#39;</span>
        <span class="n">legend_names</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">legend</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">s</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">annot</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">ticks_max_x</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">ticks_max_y</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">ticks_min_x</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">ticks_min_y</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
        <span class="n">min_v</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">max_v</span> <span class="o">=</span> <span class="mi">20</span>
        <span class="n">transpose</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">groupby</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">add_error</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">bins</span> <span class="o">=</span> <span class="mi">10</span>
        <span class="n">x_col</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">fontsize</span> <span class="o">=</span> <span class="mi">8</span>
        <span class="n">linewidth</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="n">padsize</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">multiaxis</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">alpha</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="n">stacked</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">binsize</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">PLOT</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;there is no plot defined in visualization. terminating...&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">CLASSDEFINITION</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">target</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">CLASSDEFINITION</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">COLUMNS</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">COLUMNS</span><span class="p">],</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> \
                            <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">COLUMNS</span><span class="p">])</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">columns</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">COLUMNS</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;either &quot;columns&quot; in plotter is not a list or it has less than 2 element!!!&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">XCOL</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">XCOL</span><span class="p">],</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">x_col</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">XCOL</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;x_col should be a string referring to a column in dataframe&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">PREPROCESSING</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">preprocessing_validate</span> <span class="o">=</span> <span class="n">PreprocessingValidation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">)</span>
            <span class="n">preprocessing</span> <span class="o">=</span> <span class="n">preprocessing_validate</span><span class="o">.</span><span class="n">get_valid_list_of_preprocessing</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">GROUPBY</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">groupby</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">GROUPBY</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;stacked&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">stacked</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;stacked&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">==</span><span class="s2">&quot;true&quot;</span> <span class="k">else</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="s1">&#39;alpha&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">alpha</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;alpha&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="s1">&#39;fontsize&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">fontsize</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;fontsize&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="s1">&#39;add_error&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">add_error</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;add_error&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">==</span><span class="s2">&quot;true&quot;</span> <span class="k">else</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="s1">&#39;s&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;s&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="s1">&#39;bins&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">bins</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;bins&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="s1">&#39;binsize&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">binsize</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;binsize&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="s1">&#39;min_v&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">min_v</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;min_v&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="s1">&#39;max_v&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">max_v</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;max_v&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="s1">&#39;order&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">order</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;order&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;x&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;y&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;z&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">z</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;z&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;d1&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">d1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;d1&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;d2&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">d2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;d2&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;d3&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">d3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;d3&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">TITLE</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TITLE</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;x_label&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">x_label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;x_label&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;y_label&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">y_label</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;y_label&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;legend&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">legend</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;legend&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;legend_names&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">legend_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;legend_names&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;annot&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">utilities</span><span class="o">.</span><span class="n">type_is_bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;annot&#39;</span><span class="p">]):</span>
                <span class="n">annot</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;annot&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">==</span><span class="s2">&quot;true&quot;</span> <span class="k">else</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;error: &quot;annot&quot; should be bool.... ignored!!!&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;transpose&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">utilities</span><span class="o">.</span><span class="n">type_is_bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;transpose&#39;</span><span class="p">]):</span>
                <span class="n">transpose</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;transpose&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">==</span><span class="s2">&quot;true&quot;</span> <span class="k">else</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;error: &quot;annot&quot; should be bool.... ignored!!!&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;ticks_x&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">ticks_min_x</span><span class="p">,</span> <span class="n">ticks_max_x</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;ticks_x&#39;</span><span class="p">]]</span>
        <span class="k">if</span> <span class="s1">&#39;ticks_y&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">ticks_min_y</span><span class="p">,</span> <span class="n">ticks_max_y</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;ticks_y&#39;</span><span class="p">]]</span>
        <span class="k">if</span> <span class="s1">&#39;figsize&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">figsize</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">([</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;figsize&#39;</span><span class="p">]])</span> <span class="c1"># list to tuple</span>
        <span class="k">if</span> <span class="s1">&#39;multiaxis&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">multiaxis</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;multiaxis&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">==</span><span class="s2">&quot;true&quot;</span> <span class="k">else</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="s1">&#39;fontsize&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">fontsize</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;fontsize&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="s1">&#39;linewidth&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">linewidth</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;linewidth&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="s1">&#39;padsize&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">padsize</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;padsize&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="s1">&#39;kind&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">fun</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;kind&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">fun</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;hist&#39;</span><span class="p">,</span> <span class="s1">&#39;scatter&#39;</span><span class="p">]:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;wrong kind. [kind] must be in [hist, scatter] for drilldown &#39;</span>
                      <span class="s1">&#39;visualization. terminating...&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">fun</span> <span class="o">==</span> <span class="s1">&#39;hist&#39;</span> <span class="ow">and</span> <span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;x is not defined in drilldown visualization (hist). terminating...&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">fun</span> <span class="o">==</span> <span class="s1">&#39;scatter&#39;</span> <span class="ow">and</span> <span class="p">(</span><span class="n">x</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">y</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;both x and y must be defined in drilldown visualization (scatter). &#39;</span>
                      <span class="s1">&#39;terminating...&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">PLOT</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;hexbin&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">HexbinPlot</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="n">target</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">PLOT</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;scattermatrix&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">ScatterPlotMatrix</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="n">target</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="n">s</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">PLOT</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;boxplot&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">BoxPlotting</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="n">target</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="n">z</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">,</span>
                               <span class="n">valipreprocessing</span><span class="o">=</span><span class="n">preprocessing</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">PLOT</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;bar&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">BarPlotting</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span> <span class="n">x_label</span><span class="o">=</span><span class="n">x_label</span><span class="p">,</span>
                               <span class="n">y_label</span><span class="o">=</span><span class="n">y_label</span><span class="p">,</span> <span class="n">trans</span><span class="o">=</span><span class="n">transpose</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
                               <span class="n">valipreprocessing</span><span class="o">=</span><span class="n">preprocessing</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">PLOT</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;drilldown&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">fun</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;there is no [kind] (like hist or scatter) defined in &#39;</span>
                      <span class="s1">&#39;drilldown visualization. terminating...&#39;</span><span class="p">)</span>
                <span class="k">return</span> <span class="kc">None</span>
            <span class="k">return</span> <span class="n">Drilldownplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="n">z</span><span class="p">,</span> <span class="n">fun</span><span class="o">=</span><span class="n">fun</span><span class="p">,</span> <span class="n">d1</span><span class="o">=</span><span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="o">=</span><span class="n">d2</span><span class="p">,</span> <span class="n">d3</span><span class="o">=</span><span class="n">d3</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">PLOT</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;scatter&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">ScatterPlot</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="n">target</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">PLOT</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;heatmap&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">CustomHeatMaps</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="n">z</span><span class="p">,</span> <span class="n">min_v</span><span class="o">=</span><span class="n">min_v</span><span class="p">,</span> <span class="n">max_v</span><span class="o">=</span><span class="n">max_v</span><span class="p">,</span> <span class="n">groupby</span><span class="o">=</span><span class="n">groupby</span><span class="p">,</span>
                                  <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">x_label</span><span class="o">=</span><span class="n">x_label</span><span class="p">,</span>
                                  <span class="n">y_label</span><span class="o">=</span><span class="n">y_label</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="n">annot</span><span class="p">,</span>
                                  <span class="n">ticks_max_x</span><span class="o">=</span><span class="n">ticks_max_x</span><span class="p">,</span> <span class="n">ticks_max_y</span><span class="o">=</span><span class="n">ticks_max_y</span><span class="p">,</span>
                                  <span class="n">ticks_min_x</span><span class="o">=</span><span class="n">ticks_min_x</span><span class="p">,</span> <span class="n">ticks_min_y</span><span class="o">=</span><span class="n">ticks_min_y</span><span class="p">,</span>
                                  <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span> <span class="n">valipreprocessing</span><span class="o">=</span><span class="n">preprocessing</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">PLOT</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;line&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">LinePlot</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span> <span class="n">groupby</span><span class="o">=</span><span class="n">groupby</span><span class="p">,</span> <span class="n">add_error</span><span class="o">=</span><span class="n">add_error</span><span class="p">,</span>
                            <span class="n">legend</span><span class="o">=</span><span class="n">legend</span><span class="p">,</span> <span class="n">x_label</span><span class="o">=</span><span class="n">x_label</span><span class="p">,</span> <span class="n">y_label</span><span class="o">=</span><span class="n">y_label</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
                            <span class="n">valipreprocessing</span><span class="o">=</span><span class="n">preprocessing</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span> <span class="n">x_col</span><span class="o">=</span><span class="n">x_col</span><span class="p">,</span>
                            <span class="n">ticks_max_x</span><span class="o">=</span><span class="n">ticks_max_x</span><span class="p">,</span> <span class="n">ticks_max_y</span><span class="o">=</span><span class="n">ticks_max_y</span><span class="p">,</span>
                            <span class="n">ticks_min_x</span><span class="o">=</span><span class="n">ticks_min_x</span><span class="p">,</span> <span class="n">ticks_min_y</span><span class="o">=</span><span class="n">ticks_min_y</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span>
                            <span class="n">stacked</span><span class="o">=</span><span class="n">stacked</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">PLOT</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;hist&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">HistPlot</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">,</span> <span class="n">groupby</span><span class="o">=</span><span class="n">groupby</span><span class="p">,</span>
                            <span class="n">legend</span><span class="o">=</span><span class="n">legend</span><span class="p">,</span> <span class="n">legend_names</span><span class="o">=</span><span class="n">legend_names</span><span class="p">,</span> <span class="n">x_label</span><span class="o">=</span><span class="n">x_label</span><span class="p">,</span>
                            <span class="n">y_label</span><span class="o">=</span><span class="n">y_label</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">bins</span><span class="p">,</span> <span class="n">binsize</span><span class="o">=</span><span class="n">binsize</span><span class="p">,</span>
                            <span class="n">valipreprocessing</span><span class="o">=</span><span class="n">preprocessing</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="n">figsize</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="n">fontsize</span><span class="p">,</span>
                            <span class="n">ticks_max_x</span><span class="o">=</span><span class="n">ticks_max_x</span><span class="p">,</span> <span class="n">ticks_max_y</span><span class="o">=</span><span class="n">ticks_max_y</span><span class="p">,</span>
                            <span class="n">ticks_min_x</span><span class="o">=</span><span class="n">ticks_min_x</span><span class="p">,</span> <span class="n">ticks_min_y</span><span class="o">=</span><span class="n">ticks_min_y</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="n">alpha</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="PlotValidation.get_valid_plotter"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.PlotValidation.get_valid_plotter">[docs]</a>    <span class="k">def</span> <span class="nf">get_valid_plotter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">plotter</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial_plot</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">plotter</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;not a valid plotter!!! plotting ignored ...&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">plotter</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">exceptionType</span><span class="p">,</span> <span class="n">exceptionValue</span><span class="p">,</span> <span class="n">exceptionTraceback</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;plotter initialization failed!!!</span><span class="se">\n</span><span class="s2"> </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">exceptionValue</span><span class="p">))</span></div></div>

<div class="viewcode-block" id="TopicModellingValidation"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.TopicModellingValidation">[docs]</a><span class="k">class</span> <span class="nc">TopicModellingValidation</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span> <span class="o">=</span> <span class="nb">object</span>

<div class="viewcode-block" id="TopicModellingValidation.initial"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.TopicModellingValidation.initial">[docs]</a>    <span class="k">def</span> <span class="nf">initial</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">min_num_docs</span> <span class="o">=</span> <span class="mi">10</span>
        <span class="n">allowed_postags</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">groupby</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">per_geo</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">file_label</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">use_phrases</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">use_tfidf</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">num_topics</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="n">modelname</span> <span class="o">=</span> <span class="s1">&#39;lda&#39;</span>
        <span class="n">perwordtopic</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">allowext</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">preprocessing</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">visualization</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">trainmodel</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="s1">&#39;preprocessing&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">preprocc</span> <span class="o">=</span> <span class="n">PreprocessingValidation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">)</span>
            <span class="n">preprocessing</span> <span class="o">=</span> <span class="n">preprocc</span><span class="o">.</span><span class="n">get_valid_list_of_preprocessing</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">VISUALIZATION</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">visualization_valid</span> <span class="o">=</span> <span class="n">PlotValidation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">VISUALIZATION</span><span class="p">])</span>
            <span class="n">visualization</span> <span class="o">=</span> <span class="n">task</span><span class="p">(</span><span class="n">visualization_valid</span><span class="o">.</span><span class="n">get_valid_plotter</span><span class="p">(),</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;textcolumn&#39;</span><span class="ow">not</span>  <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;&quot;textcolumn&quot; must be defined in the config.&#39;</span><span class="p">)</span>
        <span class="n">textcolumn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;textcolumn&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="s1">&#39;allowed_postags&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;allowed_postags&#39;</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;&quot;allowed_postags&quot; should be type of list... terminated..&#39;</span><span class="p">)</span>
            <span class="n">allowed_postags</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;allowed_postags&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="s1">&#39;groupby&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;groupby&#39;</span><span class="p">],</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_error</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;&quot;groupby&quot; should be type of list... terminated..&#39;</span><span class="p">)</span>
            <span class="n">groupby</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;groupby&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="s1">&#39;min_num_docs&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">min_num_docs</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;min_num_docs&#39;</span><span class="p">])</span>

        <span class="k">if</span> <span class="s1">&#39;num_topics&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">num_topics</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;num_topics&#39;</span><span class="p">])</span>

        <span class="k">if</span> <span class="s1">&#39;use_tfidf&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">use_tfidf</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;use_tfidf&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">==</span><span class="s1">&#39;true&#39;</span> <span class="k">else</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="s1">&#39;trainmodel&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">trainmodel</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;trainmodel&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">==</span><span class="s1">&#39;true&#39;</span> <span class="k">else</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="s1">&#39;use_phrases&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">use_phrases</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;use_phrases&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">==</span><span class="s1">&#39;true&#39;</span> <span class="k">else</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="s1">&#39;per_geo&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">per_geo</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;per_geo&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">==</span><span class="s1">&#39;true&#39;</span> <span class="k">else</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="s1">&#39;per_word_topic&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">perwordtopic</span> <span class="o">=</span> <span class="kc">True</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;per_word_topic&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">==</span><span class="s1">&#39;true&#39;</span> <span class="k">else</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="s1">&#39;modelname&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">modelname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="s1">&#39;modelname&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="n">corpus</span> <span class="o">=</span> <span class="n">Corpus</span><span class="p">(</span><span class="n">min_num_docs</span><span class="o">=</span><span class="n">min_num_docs</span><span class="p">,</span> <span class="n">allowed_postags</span><span class="o">=</span><span class="n">allowed_postags</span><span class="p">,</span>
                         <span class="n">use_phrases</span><span class="o">=</span><span class="n">use_phrases</span><span class="p">,</span> <span class="n">use_tfidf</span><span class="o">=</span><span class="n">use_tfidf</span><span class="p">,</span> <span class="n">allowext</span><span class="o">=</span><span class="n">allowext</span><span class="p">,</span> <span class="n">file_label</span><span class="o">=</span><span class="n">file_label</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">modelname</span> <span class="o">==</span> <span class="s1">&#39;lda&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">LDATopicModelling</span><span class="p">(</span><span class="n">num_topics</span><span class="o">=</span><span class="n">num_topics</span><span class="p">,</span> <span class="n">groupby</span><span class="o">=</span><span class="n">groupby</span><span class="p">,</span> <span class="n">per_geo</span><span class="o">=</span><span class="n">per_geo</span><span class="p">,</span>
                                     <span class="n">perwordtopic</span><span class="o">=</span><span class="n">perwordtopic</span><span class="p">,</span> <span class="n">corpus_object</span><span class="o">=</span><span class="n">corpus</span><span class="p">,</span> <span class="n">textcolumn</span><span class="o">=</span><span class="n">textcolumn</span><span class="p">,</span>
                                     <span class="n">preprocessing</span><span class="o">=</span><span class="n">preprocessing</span><span class="p">,</span> <span class="n">file_label</span><span class="o">=</span><span class="n">file_label</span><span class="p">,</span> <span class="n">visualization</span><span class="o">=</span><span class="n">visualization</span><span class="p">,</span>
                                     <span class="n">trainmodel</span><span class="o">=</span><span class="n">trainmodel</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">modelname</span> <span class="o">==</span> <span class="s1">&#39;lsi&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">LSITopicModelling</span><span class="p">(</span><span class="n">num_topics</span><span class="o">=</span><span class="n">num_topics</span><span class="p">,</span> <span class="n">groupby</span><span class="o">=</span><span class="n">groupby</span><span class="p">,</span> <span class="n">per_geo</span><span class="o">=</span><span class="n">per_geo</span><span class="p">,</span>
                                     <span class="n">perwordtopic</span><span class="o">=</span><span class="n">perwordtopic</span><span class="p">,</span> <span class="n">corpus_object</span><span class="o">=</span><span class="n">corpus</span><span class="p">,</span> <span class="n">textcolumn</span><span class="o">=</span><span class="n">textcolumn</span><span class="p">,</span>
                                     <span class="n">preprocessing</span><span class="o">=</span><span class="n">preprocessing</span><span class="p">,</span> <span class="n">file_label</span><span class="o">=</span><span class="n">file_label</span><span class="p">,</span> <span class="n">visualization</span><span class="o">=</span><span class="n">visualization</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span></div>


<div class="viewcode-block" id="TopicModellingValidation.get_valid_topicmodelling"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.TopicModellingValidation.get_valid_topicmodelling">[docs]</a>    <span class="k">def</span> <span class="nf">get_valid_topicmodelling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">topicmodel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">initial</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">topicmodel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;not a valid topicmodel!!! ...&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">topicmodel</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">exceptionType</span><span class="p">,</span> <span class="n">exceptionValue</span><span class="p">,</span> <span class="n">exceptionTraceback</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;topicmodelling initialization failed!!!</span><span class="se">\n</span><span class="s2"> </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">exceptionValue</span><span class="p">))</span></div></div>


<div class="viewcode-block" id="PreprocessingValidation"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.PreprocessingValidation">[docs]</a><span class="k">class</span> <span class="nc">PreprocessingValidation</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">preprocessing_parent_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span> <span class="o">=</span> <span class="nb">object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preprocessinglist</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preprocessing_parent_name</span> <span class="o">=</span> <span class="n">preprocessing_parent_name</span> <span class="o">+</span> <span class="s1">&#39;_&#39;</span> <span class="k">if</span> <span class="n">preprocessing_parent_name</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span>

<div class="viewcode-block" id="PreprocessingValidation.initial_preprocessing"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.PreprocessingValidation.initial_preprocessing">[docs]</a>    <span class="k">def</span> <span class="nf">initial_preprocessing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">preprocess_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">PREPROCESSING</span><span class="p">]:</span>
            <span class="n">single_preprocessing</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">PREPROCESSING</span><span class="p">][</span><span class="n">preprocess_name</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">PROCESS</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">single_preprocessing</span><span class="p">:</span>
                <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;&quot;process&quot; must be defined in </span><span class="si">{}</span><span class="s1"> preprocessing module. ignored!!!&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">preprocess_name</span><span class="p">))</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">single_preprocessing</span><span class="p">[</span><span class="n">PROCESS</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">FEATUREENGINEERING</span><span class="p">:</span>
                <span class="n">feature_engineer_validate</span> <span class="o">=</span> <span class="n">FeatureEngineeringValidation</span><span class="p">(</span><span class="n">single_preprocessing</span><span class="p">)</span>
                <span class="n">valid_preprocessing</span> <span class="o">=</span> <span class="n">feature_engineer_validate</span><span class="o">.</span><span class="n">get_valid_feature_engineering</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">valid_preprocessing</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;not a valid feature engineering </span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s1">, this is ignored...&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">single_preprocessing</span><span class="p">))</span>
                    <span class="k">continue</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">preprocessinglist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">preprocessing</span><span class="p">(</span><span class="n">valid_preprocessing</span><span class="p">,</span> 
                                    <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">preprocessing_parent_name</span><span class="si">}{</span><span class="n">preprocess_name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> 
                                    <span class="bp">self</span><span class="o">.</span><span class="n">preprocessing_parent_name</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">single_preprocessing</span><span class="p">[</span><span class="n">PROCESS</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">FILTER</span><span class="p">:</span>
                <span class="n">filter_validate</span> <span class="o">=</span> <span class="n">DatafilterValidation</span><span class="p">(</span><span class="n">single_preprocessing</span><span class="p">)</span>
                <span class="n">valid_preprocessing</span> <span class="o">=</span> <span class="n">filter_validate</span><span class="o">.</span><span class="n">get_valid_filter</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">valid_preprocessing</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;not a valid filter </span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s1">, this filtering is ignored...&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="n">single_preprocessing</span><span class="p">))</span>
                    <span class="k">continue</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">preprocessinglist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">preprocessing</span><span class="p">(</span><span class="n">valid_preprocessing</span><span class="p">,</span> 
                                    <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">preprocessing_parent_name</span><span class="si">}{</span><span class="n">preprocess_name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> 
                                    <span class="bp">self</span><span class="o">.</span><span class="n">preprocessing_parent_name</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">single_preprocessing</span><span class="p">[</span><span class="n">PROCESS</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;textfeatureengineering&#39;</span><span class="p">:</span>
                <span class="n">preprocess_txt_validate</span> <span class="o">=</span> <span class="n">TextPreprocessingValidation</span><span class="p">(</span><span class="n">single_preprocessing</span><span class="p">)</span>
                <span class="n">valid_preprocessing</span> <span class="o">=</span> <span class="n">preprocess_txt_validate</span><span class="o">.</span><span class="n">get_valid_textpreprocessing</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">valid_preprocessing</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;not a valid text preprocessing </span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s1">, this preprocessing is ignored...&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="n">single_preprocessing</span><span class="p">))</span>
                    <span class="k">continue</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">preprocessinglist</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">preprocessing</span><span class="p">(</span><span class="n">valid_preprocessing</span><span class="p">,</span> 
                                    <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">preprocessing_parent_name</span><span class="si">}{</span><span class="n">preprocess_name</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> 
                                    <span class="bp">self</span><span class="o">.</span><span class="n">preprocessing_parent_name</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="PreprocessingValidation.get_valid_list_of_preprocessing"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.PreprocessingValidation.get_valid_list_of_preprocessing">[docs]</a>    <span class="k">def</span> <span class="nf">get_valid_list_of_preprocessing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">PREPROCESSING</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">PREPROCESSING</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;there is not any valid preprocessing defined on input data.&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">initial_preprocessing</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">exceptionType</span><span class="p">,</span> <span class="n">exceptionValue</span><span class="p">,</span> <span class="n">exceptionTraceback</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;preprocessing initialization failed!!!</span><span class="se">\n</span><span class="s2"> </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">exceptionValue</span><span class="p">))</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">preprocessinglist</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;not even a valid preprocessing!!! preprocessings are ignored ...&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">preprocessinglist</span></div></div>


<div class="viewcode-block" id="TasksValidation"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.TasksValidation">[docs]</a><span class="k">class</span> <span class="nc">TasksValidation</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">artifact_folder</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span> <span class="o">=</span> <span class="nb">object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">artifact_folder</span> <span class="o">=</span> <span class="n">artifact_folder</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tasks</span> <span class="o">=</span> <span class="p">[]</span>

<div class="viewcode-block" id="TasksValidation.initial_tasks"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.TasksValidation.initial_tasks">[docs]</a>    <span class="k">def</span> <span class="nf">initial_tasks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="k">for</span> <span class="n">task_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">]:</span>
            <span class="n">task_cwd</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">][</span><span class="n">task_name</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">TITLE</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">CWD</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">][</span><span class="n">task_name</span><span class="p">]:</span>
                <span class="n">cwd_valid</span> <span class="o">=</span> <span class="n">CwdValidation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">][</span><span class="n">task_name</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">artifact_folder</span><span class="p">)</span>
                <span class="n">task_cwd</span> <span class="o">=</span> <span class="n">cwd_valid</span><span class="o">.</span><span class="n">get_valid_cwd</span><span class="p">()</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">][</span><span class="n">task_name</span><span class="p">][</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">CLASSIFICATION</span><span class="p">:</span>
                <span class="n">valid_classifier</span> <span class="o">=</span> <span class="n">ClassificationValidation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">][</span><span class="n">task_name</span><span class="p">],</span> <span class="n">task_name</span><span class="p">)</span>
                <span class="n">valid_task</span> <span class="o">=</span> <span class="n">valid_classifier</span><span class="o">.</span><span class="n">get_valid_classifier</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">valid_task</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;not a valid </span><span class="si">{0}</span><span class="s1"> classifier, this classification is ignored...&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">][</span><span class="n">task_name</span><span class="p">][</span><span class="n">ALGORITHM</span><span class="p">]))</span>
                    <span class="k">continue</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">(</span><span class="n">valid_task</span><span class="p">,</span> <span class="n">task_name</span><span class="p">,</span> <span class="n">task_cwd</span><span class="p">,</span> <span class="n">title</span><span class="p">))</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">][</span><span class="n">task_name</span><span class="p">][</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">CLUSTERING</span><span class="p">:</span>
                <span class="n">valid_clusterer</span> <span class="o">=</span> <span class="n">ClusteringValidation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">][</span><span class="n">task_name</span><span class="p">])</span>
                <span class="n">valid_task</span> <span class="o">=</span> <span class="n">valid_clusterer</span><span class="o">.</span><span class="n">get_valid_clusterer</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">valid_task</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;not a valid </span><span class="si">{0}</span><span class="s1"> clusterer, this clustering is ignored...&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">][</span><span class="n">task_name</span><span class="p">][</span><span class="n">ALGORITHM</span><span class="p">]))</span>
                    <span class="k">continue</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">(</span><span class="n">valid_task</span><span class="p">,</span> <span class="n">task_name</span><span class="p">,</span> <span class="n">task_cwd</span><span class="p">,</span> <span class="n">title</span><span class="p">))</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">][</span><span class="n">task_name</span><span class="p">][</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">REGRESSION</span><span class="p">:</span>
                <span class="n">valid_regressor</span> <span class="o">=</span> <span class="n">RegressionValidation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">][</span><span class="n">task_name</span><span class="p">],</span> <span class="n">task_name</span><span class="p">)</span>
                <span class="n">valid_task</span> <span class="o">=</span> <span class="n">valid_regressor</span><span class="o">.</span><span class="n">get_valid_regressor</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">valid_task</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;not a valid </span><span class="si">{0}</span><span class="s1"> regressor this regressor is ignored...&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">][</span><span class="n">task_name</span><span class="p">][</span><span class="n">ALGORITHM</span><span class="p">]))</span>
                    <span class="k">continue</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">(</span><span class="n">valid_task</span><span class="p">,</span> <span class="n">task_name</span><span class="p">,</span> <span class="n">task_cwd</span><span class="p">,</span> <span class="n">title</span><span class="p">))</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">][</span><span class="n">task_name</span><span class="p">][</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">VISUALIZATION</span><span class="p">:</span>
                <span class="n">valid_plotter</span> <span class="o">=</span> <span class="n">PlotValidation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">][</span><span class="n">task_name</span><span class="p">])</span>
                <span class="n">valid_task</span> <span class="o">=</span> <span class="n">valid_plotter</span><span class="o">.</span><span class="n">get_valid_plotter</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">valid_task</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;not a valid </span><span class="si">{0}</span><span class="s1"> plotter this visualization is ignored...&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">][</span><span class="n">task_name</span><span class="p">][</span><span class="n">PLOT</span><span class="p">]))</span>
                    <span class="k">continue</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">(</span><span class="n">valid_task</span><span class="p">,</span> <span class="n">task_name</span><span class="p">,</span> <span class="n">task_cwd</span><span class="p">,</span> <span class="n">title</span><span class="p">))</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">][</span><span class="n">task_name</span><span class="p">][</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">CONFUSION</span><span class="p">:</span>
                <span class="n">valid_confusion</span> <span class="o">=</span> <span class="n">ConfusionMatrixValidation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">][</span><span class="n">task_name</span><span class="p">])</span>
                <span class="n">valid_task</span> <span class="o">=</span> <span class="n">valid_confusion</span><span class="o">.</span><span class="n">get_valid_confusion</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">valid_task</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;not a valid </span><span class="si">{0}</span><span class="s1"> confusion matrix this task is ignored...&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">][</span><span class="n">task_name</span><span class="p">][</span><span class="n">CONFUSION</span><span class="p">]))</span>
                    <span class="k">continue</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">(</span><span class="n">valid_task</span><span class="p">,</span> <span class="n">task_name</span><span class="p">,</span> <span class="n">task_cwd</span><span class="p">,</span> <span class="n">title</span><span class="p">))</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">][</span><span class="n">task_name</span><span class="p">][</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">ROCCURVE</span><span class="p">:</span>
                <span class="n">valid_roc</span> <span class="o">=</span> <span class="n">RocCurveValidation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">][</span><span class="n">task_name</span><span class="p">])</span>
                <span class="n">valid_task</span> <span class="o">=</span> <span class="n">valid_roc</span><span class="o">.</span><span class="n">get_valid_roc_curve</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">valid_task</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;not a valid </span><span class="si">{0}</span><span class="s1"> confusion matrix this task is ignored...&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">][</span><span class="n">task_name</span><span class="p">][</span><span class="n">ROCCURVE</span><span class="p">]))</span>
                    <span class="k">continue</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">(</span><span class="n">valid_task</span><span class="p">,</span> <span class="n">task_name</span><span class="p">,</span> <span class="n">task_cwd</span><span class="p">,</span> <span class="n">title</span><span class="p">))</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">][</span><span class="n">task_name</span><span class="p">][</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">WRITETODB</span><span class="p">:</span>
                <span class="n">valid_db</span> <span class="o">=</span> <span class="n">DbValidation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">][</span><span class="n">task_name</span><span class="p">])</span>
                <span class="n">valid_task</span> <span class="o">=</span> <span class="n">valid_db</span><span class="o">.</span><span class="n">get_valid_db</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">valid_task</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;not a valid </span><span class="si">{0}</span><span class="s1"> db task this task is ignored...&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">][</span><span class="n">task_name</span><span class="p">]))</span>
                    <span class="k">continue</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">(</span><span class="n">valid_task</span><span class="p">,</span> <span class="n">task_name</span><span class="p">,</span> <span class="n">task_cwd</span><span class="p">,</span> <span class="n">title</span><span class="p">))</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">][</span><span class="n">task_name</span><span class="p">][</span><span class="n">TYPE</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">TOPICMODELLING</span><span class="p">:</span>
                <span class="n">valid_db</span> <span class="o">=</span> <span class="n">TopicModellingValidation</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">][</span><span class="n">task_name</span><span class="p">])</span>
                <span class="n">valid_task</span> <span class="o">=</span> <span class="n">valid_db</span><span class="o">.</span><span class="n">get_valid_topicmodelling</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">valid_task</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;not a valid </span><span class="si">{0}</span><span class="s1"> topic modelling task this task is ignored...&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">][</span><span class="n">task_name</span><span class="p">]))</span>
                    <span class="k">continue</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">(</span><span class="n">valid_task</span><span class="p">,</span> <span class="n">task_name</span><span class="p">,</span> <span class="n">task_cwd</span><span class="p">,</span> <span class="n">title</span><span class="p">))</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="TasksValidation.get_valid_list_of_tasks"><a class="viewcode-back" href="../../../gemlib.validation.html#gemlib.validation.inputvalidation.TasksValidation.get_valid_list_of_tasks">[docs]</a>    <span class="k">def</span> <span class="nf">get_valid_list_of_tasks</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">TASKS</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">:</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;there is not any tasks on input data.&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validate_instance</span><span class="p">[</span><span class="n">TASKS</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s1">&#39;there is not any valid tasks defined on input data.&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">initial_tasks</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">exceptionType</span><span class="p">,</span> <span class="n">exceptionValue</span><span class="p">,</span> <span class="n">exceptionTraceback</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">exc_info</span><span class="p">()</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;tasks initialization failed!!!</span><span class="se">\n</span><span class="s2"> </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">exceptionValue</span><span class="p">))</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tasks</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">utilities</span><span class="o">.</span><span class="n">_info</span><span class="p">(</span><span class="s2">&quot;not even a valid task!!! tasks are ignored ...&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tasks</span></div></div>
</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Ehsan Mohebi.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>